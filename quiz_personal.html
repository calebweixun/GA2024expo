<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GlobalAct：測出你的斜槓行銷鈔能力</title>
    <link rel="stylesheet" href="reset.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="html2canvas.min.js"></script>
  </head>
  <body>
    <div id="main" class="dflex-col text-center window bg1 bg jc-sp-bt">
      <img
        class="logo-pd-top top-logo"
        src="img/bg-toplogo.png"
        alt="GA-Logo"
      />
      <div id="intro" class="question active">
        <h1>測出你的<br />斜槓行銷鈔能力</h1>
        <p style="width: 1080px">&nbsp;</p>
        <div class="dflex-row w-90 g30">
          <button id="start-button">開始測驗</button>
          <button onclick="window.location.href='/GA2024expo/'">
            回到主選單
          </button>
        </div>
      </div>

      <div id="question-1" class="question" data-points="">
        <h2>你會怎麼幫一家賣咖啡的品牌找出客群？</h2>
        <img class="q-img" src="img/question/p1.png" alt="" />
        <div class="answers">
          <button data-points="3">找所有愛喝咖啡的網友（越多越好）</button>
          <button data-points="2">找年輕人，因為他們愛喝手沖咖啡</button>
          <button data-points="1">
            找一群壓力大的上班族<br />讓他們「咖啡續命」
          </button>
          <button data-points="0">我根本不知道從哪裡開始找</button>
        </div>
        <div class="nav-buttons">
          <button class="prev-button">回上題</button>
        </div>
      </div>

      <div id="question-2" class="question" data-points="">
        <h2>
          老闆要你想一個吸睛的活動<br />創造更高的營業額<br />下面哪個是你的答案？
        </h2>
        <img class="q-img" src="img/question/p2.png" alt="" />
        <div class="answers">
          <button data-points="3">免費送咖啡，順便讓大家集點</button>
          <button data-points="1">舉辦咖啡比賽，冠軍可以喝一年免錢</button>
          <button data-points="2">找 KOL 拍影片，讓咖啡直接成為潮流話題</button>
          <button data-points="0">抱歉，我還沒想到這麼有趣的東西</button>
        </div>
        <div class="nav-buttons">
          <button class="prev-button">回上題</button>
        </div>
      </div>

      <div id="question-3" class="question" data-points="">
        <h2>朋友開店，讓你幫忙寫宣傳貼文<br />下面哪個文案是你的風格？</h2>
        <img class="q-img" src="img/question/p3.png" alt="" />
        <div class="answers">
          <button data-points="0">全新開幕，快來品嚐我們的超好吃XX！</button>
          <button data-points="1">你可能喝過咖啡，但你一定沒喝過這杯！</button>
          <button data-points="3">
            一杯咖啡，兩種生活<br />給你早上能量和晚上陪伴。
          </button>
          <button data-points="2">呃……要不要來喝咖啡？</button>
        </div>
        <div class="nav-buttons">
          <button class="prev-button">回上題</button>
        </div>
      </div>

      <div id="question-4" class="question" data-points="">
        <h2>你會怎麼用幾句話說服人<br />購買一款高單價的藝妓咖啡豆？</h2>
        <img class="q-img" src="img/question/p4.png" alt="" />
        <div class="answers">
          <button data-points="2">直接講重點，告訴他買了有多划算</button>
          <button data-points="3">寫個小故事，讓產品看起來很溫暖</button>
          <button data-points="1">加點幽默和創意，讓人看了忍不住笑出來</button>
          <button data-points="4">
            述說咖啡豆手沖場景，描繪為生活帶來的質感
          </button>
          <button data-points="0">真的有點困難，我需要模仿對象！</button>
        </div>
        <div class="nav-buttons">
          <button class="prev-button">回上題</button>
        </div>
      </div>

      <div id="question-5" class="question" data-points="">
        <h2>你需要製作一隻爆款短影音<br />前5秒要安排什麼樣的內容呢？</h2>
        <img class="q-img" src="img/question/p5.png" alt="" />
        <div class="answers">
          <button data-points="1">先放上一段自我介紹，樹立品牌形象</button>
          <button data-points="0">放上專業的開頭動畫，提高品牌記憶點</button>
          <button data-points="3">用一句話告訴觀眾他將獲得什麼</button>
          <button data-points="4">用爆笑迷因開場，結合影片主題</button>
          <button data-points="2">不囉唆直接切入影片主題</button>
        </div>
        <div class="nav-buttons">
          <button class="prev-button">回上題</button>
        </div>
      </div>

      <div id="question-6" class="question" data-points="">
        <h2>老闆要你設計一張質感海報吸引顧客<br />參考資料會從哪裡搜尋？</h2>
        <img class="q-img" src="img/question/p6.png" alt="" />
        <div class="answers">
          <button data-points="4">Pinterest</button>
          <button data-points="1">Google</button>
          <button data-points="2">FB</button>
          <button data-points="3">IG</button>
          <button data-points="0">Chat GPT</button>
        </div>
        <div class="nav-buttons">
          <button class="prev-button">回上題</button>
        </div>
      </div>

      <div id="result" class="result">
        <h2 id="result-text" class="fz36"></h2>
        <img id="result-imgs" class="result-img" src="" alt="result" />
        <div class="dflex-row w-90 g30 padding-LR">
          <button id="restart-button">再測一次</button>
          <button id="share-button">分享結果</button>
          <button onclick="window.location.href='/GA2024expo/'">
            回到主選單
          </button>
        </div>
      </div>
      <img class="logo-pd-bt bt-logo" src="img/bg-logo.png" alt="GA-Logo" />
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        let totalPoints = 0;
        const questions = document.querySelectorAll(".question");
        let currentQuestionIndex = 0;
        const pointsHistory = [];

        const startButton = document.getElementById("start-button");
        const restartButton = document.getElementById("restart-button");
        const shareButton = document.getElementById("share-button");

        startButton.addEventListener("click", startQuiz);
        restartButton.addEventListener("click", restartQuiz);
        shareButton.addEventListener("click", shareResult);

        document.querySelectorAll(".answers button").forEach((button) => {
          button.addEventListener("click", (event) => {
            const points = parseInt(event.target.getAttribute("data-points"));
            pointsHistory.push(points);
            totalPoints += points;
            console.log(totalPoints);
            nextQuestion();
          });
        });

        document.querySelectorAll(".prev-button").forEach((button) => {
          button.addEventListener("click", prevQuestion);
        });

        function startQuiz() {
          document.getElementById("intro").classList.remove("active");
          document.getElementById("main").classList.remove("bg1");
          document.getElementById("main").classList.add("bg0");
          currentQuestionIndex = 1;
          totalPoints = 0;
          questions[currentQuestionIndex].classList.add("active");
          console.log(document.getElementById("intro"));
          console.log(questions[currentQuestionIndex]);
        }

        function nextQuestion() {
          questions[currentQuestionIndex].classList.remove("active");
          currentQuestionIndex++;

          if (currentQuestionIndex < questions.length) {
            questions[currentQuestionIndex].classList.add("active");
          } else {
            showResult(totalPoints);
          }
        }

        function prevQuestion() {
          if (currentQuestionIndex > 0) {
            questions[currentQuestionIndex].classList.remove("active");
            totalPoints -= pointsHistory.pop();
            currentQuestionIndex--;
            questions[currentQuestionIndex].classList.add("active");
          }
          if (currentQuestionIndex == 0) {
            document.getElementById("main").classList.remove("bg0");
            document.getElementById("main").classList.add("bg1");
          }
        }

        function showResult(points) {
          const resultDiv = document.getElementById("result");
          const resultText = document.getElementById("result-text");
          const resultImg = document.getElementById("result-imgs");
          let resultCategory = "";
          let resultimgs = "";

          if (points <= 6) {
            resultCategory = "小嫩苜蓿芽";
            resultimgs = "img/result/p1.png";
          } else if (points <= 10) {
            resultCategory = "可愛小白菜";
            resultimgs = "img/result/p2.png";
          } else if (points <= 14) {
            resultCategory = "成長杏鮑菇";
            resultimgs = "img/result/p3.png";
          } else if (points <= 18) {
            resultCategory = "熟成哈密瓜";
            resultimgs = "img/result/p4.png";
          } else {
            resultCategory = "萬能紅石榴";
            resultimgs = "img/result/p5.png";
          }

          resultText.textContent = `${resultCategory}`;
          resultImg.src = resultimgs;
          resultDiv.classList.add("active");
          questions[currentQuestionIndex - 1].classList.remove("active");
        }

        function restartQuiz() {
          totalPoints = 0;
          currentQuestionIndex = 0;
          pointsHistory.length = 0;
          document.getElementById("result").classList.remove("active");
          document.getElementById("intro").classList.add("active");
          document.getElementById("main").classList.remove("bg0");
          document.getElementById("main").classList.add("bg1");
        }

        function shareResult() {
          // 修改選取元素為 #result
          html2canvas(document.querySelector("#main")).then((canvas) => {
            canvas.toBlob((blob) => {
              const file = new File([blob], "result-personal.png", {
                type: "image/png",
              });
              const data = {
                files: [file],
                title: "測驗結果",
                text: "快來看看我的斜槓行銷鈔能力！",
              };
              navigator.share(data).catch(console.error);
            });
          });
        }
      });
    </script>
  </body>
</html>
